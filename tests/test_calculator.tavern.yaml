---
test_name: Calculator operations

config:
  backends:
    grpc: grpc
  grpc:
    connect:
      host: localhost
      port: 50051
    proto:
      source: proto
      module: proto

stages:
  - name: add two numbers
    grpc_request:
      service: calculator.Calculator/Add
      json:
        a: 10
        b: 5
    grpc_response:
      body:
        result: 15

  - name: subtract two numbers
    grpc_request:
      service: calculator.Calculator/Subtract
      json:
        a: 10
        b: 5
    grpc_response:
      body:
        result: 5

  - name: multiply two numbers
    grpc_request:
      service: calculator.Calculator/Multiply
      json:
        a: 6
        b: 7
    grpc_response:
      body:
        result: 42

  - name: divide two numbers
    grpc_request:
      service: calculator.Calculator/Divide
      json:
        a: 20
        b: 5
    grpc_response:
      body:
        result: 4

  - name: division by zero returns error
    grpc_request:
      service: calculator.Calculator/Divide
      json:
        a: 5
        b: 0
    grpc_response:
      status: INVALID_ARGUMENT
      details: division by zero
